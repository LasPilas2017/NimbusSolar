{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\garci\\\\Downloads\\\\nimbus-login-app\\\\src\\\\componentes\\\\Personal.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../supabase';\nimport React from 'react';\nimport AgregarReporte from './AgregarReporte';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Personal({\n  usuario\n}) {\n  _s();\n  const [vista, setVista] = useState('planilla');\n  const [personal, setPersonal] = useState([]);\n  const [reportes, setReportes] = useState([]);\n  const [puestosList, setPuestosList] = useState([]);\n  const [proyectosList, setProyectosList] = useState([]);\n  const [historialVisible, setHistorialVisible] = useState(null);\n  const [nuevoPuesto, setNuevoPuesto] = useState('');\n  const [nuevoProyecto, setNuevoProyecto] = useState('');\n  const [gastosCajaChica, setGastosCajaChica] = useState([]);\n  const [reporteEnEdicion, setReporteEnEdicion] = useState(null);\n  const [trabajadorEnEdicion, setTrabajadorEnEdicion] = useState(null);\n  const [nuevoPersonal, setNuevoPersonal] = useState({\n    nombre: '',\n    puesto: '',\n    proyecto: '',\n    salario: '',\n    meta: '',\n    bonificacion: '',\n    trabajometa: '',\n    fecha: '',\n    modalidad: 'día',\n    precioporcantidad: '',\n    cajaChica: 'no',\n    montoCajaChica: '',\n    viaticosDiarios: ''\n  });\n  useEffect(() => {\n    const fetchGastos = async () => {\n      const {\n        data,\n        error\n      } = await supabase.from(\"gastos_cajachica\").select(\"*\").order(\"fecha\", {\n        ascending: false\n      });\n      if (!error) setGastosCajaChica(data);\n    };\n    fetchGastos();\n  }, []);\n  useEffect(() => {\n    fetchPuestos();\n    fetchProyectos();\n    obtenerPersonal();\n    obtenerReportes();\n  }, []);\n  const totalAcumulado = reportesPersona => {\n    return reportesPersona.reduce((sum, r) => {\n      const cantidad = r.cantidad || 0;\n      const sePresento = r.sepresentoatrabajar === \"Sí\";\n      let salarioBase = 0;\n      let bonificacion = 0;\n      const viatico = sePresento ? r.viaticos || 0 : 0;\n      if (sePresento) {\n        if (p.modalidad === 'cantidad') {\n          salarioBase = cantidad * (p.precioporcantidad || 0);\n        } else {\n          salarioBase = p.salariopordia || 0;\n          const meta = p.metaestablecida || 0;\n          if (cantidad > meta) {\n            const extra = cantidad - meta;\n            bonificacion = extra * (p.bonificacion || 0);\n          }\n        }\n      }\n      return sum + salarioBase + bonificacion + viatico;\n    }, 0);\n  };\n  const fetchPuestos = async () => {\n    const {\n      data,\n      error\n    } = await supabase.from('puestos').select('*').order('nombre', {\n      ascending: true\n    });\n    if (!error) setPuestosList(data);\n  };\n  const fetchProyectos = async () => {\n    const {\n      data,\n      error\n    } = await supabase.from('proyectos').select('*').order('nombre', {\n      ascending: true\n    });\n    if (!error) setProyectosList(data);\n  };\n  const agregarPuesto = async () => {\n    if (!nuevoPersonal.puesto) return;\n    const {\n      data,\n      error\n    } = await supabase.from('puestos').insert([{\n      nombre: nuevoPersonal.puesto\n    }]).select();\n    if (error) {\n      console.error('Error al guardar puesto:', error.message);\n      alert('No se pudo guardar el puesto');\n      return;\n    }\n    if (data && data.length > 0) {\n      setNuevoPersonal(p => ({\n        ...p,\n        puesto: data[0].nombre\n      }));\n    }\n    setNuevoPuesto('');\n    fetchPuestos();\n  };\n  const agregarProyecto = async () => {\n    if (!nuevoPersonal.proyecto) return;\n    const {\n      data,\n      error\n    } = await supabase.from('proyectos').insert([{\n      nombre: nuevoPersonal.proyecto\n    }]).select(); // Esto hace que Supabase devuelva los datos insertados\n\n    if (error) {\n      console.error('Error al guardar proyecto:', error.message);\n      alert('No se pudo guardar el proyecto');\n      return;\n    }\n    if (data && data.length > 0) {\n      setNuevoPersonal(p => ({\n        ...p,\n        proyecto: data[0].nombre\n      }));\n    }\n    setNuevoProyecto('');\n    fetchProyectos();\n  };\n  const obtenerPersonal = async () => {\n    const {\n      data,\n      error\n    } = await supabase.from('registrodepersonal').select('*').order('created_at', {\n      ascending: false\n    });\n    if (!error) setPersonal(data);\n  };\n  const obtenerReportes = async () => {\n    const {\n      data,\n      error\n    } = await supabase.from('reportesdiarios').select('*');\n    if (!error) setReportes(data);\n  };\n  const handleAgregar = async () => {\n    if (!nuevoPersonal.nombre || !nuevoPersonal.puesto) {\n      alert('El nombre y puesto son obligatorios');\n      return;\n    }\n    if (nuevoPersonal.modalidad === 'día' && !nuevoPersonal.salario) {\n      alert('El salario por día es obligatorio');\n      return;\n    }\n    if (nuevoPersonal.modalidad === 'cantidad' && !nuevoPersonal.precioporcantidad) {\n      alert('El precio por unidad es obligatorio');\n      return;\n    }\n    if (nuevoPersonal.cajaChica === 'si' && !nuevoPersonal.montoCajaChica) {\n      alert('El monto de caja chica es obligatorio si está asignada');\n      return;\n    }\n    const {\n      data: existente\n    } = await supabase.from('registrodepersonal').select('*').eq('nombrecompleto', nuevoPersonal.nombre).single();\n    const registro = {\n      proyecto: nuevoPersonal.proyecto,\n      metaestablecida: parseInt(nuevoPersonal.meta) || null,\n      modalidad: nuevoPersonal.modalidad,\n      bonificacion: parseFloat(nuevoPersonal.bonificacion) || 0,\n      fechadeingreso: nuevoPersonal.fecha || new Date().toISOString(),\n      precioporcantidad: nuevoPersonal.modalidad === 'cantidad' ? parseFloat(nuevoPersonal.precioporcantidad) : null,\n      salariopordia: nuevoPersonal.modalidad === 'día' ? parseFloat(nuevoPersonal.salario) : null,\n      trabajometa: nuevoPersonal.trabajometa,\n      caja_chica_asignada: nuevoPersonal.cajaChica === 'si',\n      monto_caja_chica: nuevoPersonal.cajaChica === 'si' ? parseFloat(nuevoPersonal.montoCajaChica) : null,\n      viaticos_diarios: parseFloat(nuevoPersonal.viaticosDiarios) || 0\n    };\n    if (existente) {\n      await supabase.from('registrodepersonal').update(registro).eq('id', existente.id);\n    } else {\n      await supabase.from('registrodepersonal').insert([{\n        nombrecompleto: nuevoPersonal.nombre,\n        puesto: nuevoPersonal.puesto,\n        ...registro\n      }]);\n    }\n    setNuevoPersonal({\n      nombre: '',\n      puesto: '',\n      proyecto: '',\n      salario: '',\n      meta: '',\n      bonificacion: '',\n      trabajometa: '',\n      fecha: '',\n      modalidad: 'día',\n      precioporcantidad: '',\n      cajaChica: 'no',\n      montoCajaChica: '',\n      viaticosDiarios: ''\n    });\n    setVista('planilla');\n    obtenerPersonal();\n  };\n  const calcularRealizado = nombre => reportes.filter(r => r.nombretrabajador === nombre).reduce((sum, r) => sum + (r.cantidad || 0), 0);\n  const calcularViaticos = nombre => reportes.filter(r => r.nombretrabajador === nombre).reduce((sum, r) => sum + (r.viaticos || 0), 0);\n  const calcularPago = p => {\n    // Filtrar reportes por trabajador\n    const reportesTrabajador = reportes.filter(r => r.nombretrabajador === p.nombrecompleto);\n    let realizadoTotal = 0;\n    let bonif = 0;\n    if (p.modalidad === 'día' && p.metaestablecida) {\n      // Agrupar por fecha y calcular extra diario\n      const agrupadosPorDia = {};\n      for (const r of reportesTrabajador) {\n        if (!agrupadosPorDia[r.fechareporte]) agrupadosPorDia[r.fechareporte] = 0;\n        agrupadosPorDia[r.fechareporte] += r.cantidad || 0;\n      }\n      for (const dia in agrupadosPorDia) {\n        const totalDia = agrupadosPorDia[dia];\n        realizadoTotal += totalDia;\n        if (totalDia > p.metaestablecida) {\n          bonif += (totalDia - p.metaestablecida) * (p.bonificacion || 0);\n        }\n      }\n    } else {\n      realizadoTotal = reportesTrabajador.reduce((sum, r) => sum + (r.cantidad || 0), 0);\n      if (p.modalidad === 'cantidad') {\n        bonif = realizadoTotal >= (p.metaestablecida || 0) ? p.bonificacion : 0;\n      }\n    }\n    const pagoBase = p.modalidad === 'cantidad' ? realizadoTotal * p.precioporcantidad : p.salariopordia || 0;\n    const total = pagoBase + bonif;\n    return {\n      realizado: realizadoTotal,\n      pago: pagoBase,\n      bonif,\n      total\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-6 max-w-7xl mx-auto bg-white/10 backdrop-blur-xl p-6 rounded-2xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-6 text-center\",\n      children: \"\\uD83D\\uDC77 Gesti\\xF3n de Personal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center gap-4 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setVista('formulario'),\n        className: `px-4 py-2 rounded ${vista === 'formulario' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`,\n        children: \"Agregar personal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setVista('planilla'),\n        className: `px-4 py-2 rounded ${vista === 'planilla' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`,\n        children: \"Planilla completa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), vista === 'formulario' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Nombre completo\",\n        value: nuevoPersonal.nombre,\n        onChange: e => setNuevoPersonal({\n          ...nuevoPersonal,\n          nombre: e.target.value\n        }),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 5\n      }, this), nuevoPuesto === '' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          value: nuevoPersonal.puesto,\n          onChange: e => setNuevoPersonal({\n            ...nuevoPersonal,\n            puesto: e.target.value\n          }),\n          className: \"border p-2 rounded flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Seleccionar puesto...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 11\n          }, this), puestosList.map((item, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: item.nombre,\n            children: item.nombre\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setNuevoPuesto('nuevo'),\n          className: \"bg-green-600 text-white px-3 py-2 rounded\",\n          children: \"+ Puesto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 7\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Nuevo puesto\",\n          value: nuevoPersonal.puesto,\n          onChange: e => setNuevoPersonal({\n            ...nuevoPersonal,\n            puesto: e.target.value\n          }),\n          className: \"border p-2 rounded flex-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: agregarPuesto,\n          className: \"bg-blue-600 text-white px-3 py-2 rounded\",\n          children: \"Guardar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setNuevoPuesto('');\n            setNuevoPersonal({\n              ...nuevoPersonal,\n              puesto: ''\n            });\n          },\n          className: \"bg-gray-400 text-white px-3 py-2 rounded\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 7\n      }, this), nuevoProyecto === '' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          value: nuevoPersonal.proyecto,\n          onChange: e => setNuevoPersonal({\n            ...nuevoPersonal,\n            proyecto: e.target.value\n          }),\n          className: \"border p-2 rounded flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Seleccionar proyecto...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 11\n          }, this), proyectosList.map((item, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: item.nombre,\n            children: item.nombre\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setNuevoProyecto('nuevo'),\n          className: \"bg-green-600 text-white px-3 py-2 rounded\",\n          children: \"+ Proyecto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 7\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Nuevo proyecto\",\n          value: nuevoPersonal.proyecto,\n          onChange: e => setNuevoPersonal({\n            ...nuevoPersonal,\n            proyecto: e.target.value\n          }),\n          className: \"border p-2 rounded flex-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: agregarProyecto,\n          className: \"bg-blue-600 text-white px-3 py-2 rounded\",\n          children: \"Guardar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setNuevoProyecto('');\n            setNuevoPersonal({\n              ...nuevoPersonal,\n              proyecto: ''\n            });\n          },\n          className: \"bg-gray-400 text-white px-3 py-2 rounded\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: nuevoPersonal.modalidad,\n        onChange: e => setNuevoPersonal({\n          ...nuevoPersonal,\n          modalidad: e.target.value\n        }),\n        className: \"border p-2 rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"d\\xEDa\",\n          children: \"D\\xEDa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"cantidad\",\n          children: \"Cantidad\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 5\n      }, this), nuevoPersonal.modalidad === 'día' && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Salario por d\\xEDa\",\n        value: nuevoPersonal.salario,\n        onChange: e => setNuevoPersonal({\n          ...nuevoPersonal,\n          salario: e.target.value\n        }),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 49\n      }, this), nuevoPersonal.modalidad === 'cantidad' && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Precio por unidad\",\n        value: nuevoPersonal.precioporcantidad,\n        onChange: e => setNuevoPersonal({\n          ...nuevoPersonal,\n          precioporcantidad: e.target.value\n        }),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 54\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Meta establecida\",\n        value: nuevoPersonal.meta,\n        onChange: e => setNuevoPersonal({\n          ...nuevoPersonal,\n          meta: e.target.value\n        }),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Bonificaci\\xF3n meta (Q por unidad extra)\",\n        value: nuevoPersonal.bonificacion,\n        onChange: e => setNuevoPersonal({\n          ...nuevoPersonal,\n          bonificacion: e.target.value\n        }),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Trabajo asignado (meta)\",\n        value: nuevoPersonal.trabajometa,\n        onChange: e => setNuevoPersonal({\n          ...nuevoPersonal,\n          trabajometa: e.target.value\n        }),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        value: nuevoPersonal.fecha,\n        onChange: e => setNuevoPersonal({\n          ...nuevoPersonal,\n          fecha: e.target.value\n        }),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: nuevoPersonal.cajaChica,\n        onChange: e => setNuevoPersonal({\n          ...nuevoPersonal,\n          cajaChica: e.target.value\n        }),\n        className: \"border p-2 rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"no\",\n          children: \"Caja chica: No\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"si\",\n          children: \"Caja chica: S\\xED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this), nuevoPersonal.cajaChica === 'si' && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Monto de caja chica\",\n        value: nuevoPersonal.montoCajaChica,\n        onChange: e => setNuevoPersonal({\n          ...nuevoPersonal,\n          montoCajaChica: e.target.value\n        }),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 48\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Vi\\xE1ticos diarios\",\n        value: nuevoPersonal.viaticosDiarios,\n        onChange: e => setNuevoPersonal({\n          ...nuevoPersonal,\n          viaticosDiarios: e.target.value\n        }),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleAgregar,\n        className: \"bg-green-600 text-white py-2 rounded col-span-2\",\n        children: \"Guardar Personal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 3\n    }, this), vista === 'planilla' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-max border border-gray-300 text-sm text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-100\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 border\",\n                children: \"Trabajador\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 border\",\n                children: \"Puesto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 border\",\n                children: \"Proyecto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 border\",\n                children: \"Salario por d\\xEDa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 border\",\n                children: \"Meta establecida\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 border\",\n                children: \"Pago por unidad extra\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 border\",\n                children: \"Trabajo asignado\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 border\",\n                children: \"No. de grupo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 border\",\n                children: \"Caja chica\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-2 border\",\n                children: \"Ver detalle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: personal.map((p, i) => {\n              var _p$salariopordia, _p$bonificacion;\n              const reportesPersona = reportes.filter(r => r.nombretrabajador === p.nombrecompleto);\n              const mostrarDetalle = historialVisible === p.nombrecompleto;\n              const ultimoGrupo = reportesPersona.length > 0 ? reportesPersona[reportesPersona.length - 1].numerogrupo || '-' : '-';\n              const totalAcumulado = reportesPersona.reduce((sum, r) => {\n                const cantidad = r.cantidad || 0;\n                const sePresento = r.sepresentoatrabajar === \"Sí\";\n                let salarioBase = 0;\n                let bonificacion = 0;\n                const viatico = sePresento ? r.viaticos || 0 : 0;\n                if (sePresento) {\n                  if (p.modalidad === 'cantidad') {\n                    salarioBase = cantidad * (p.precioporcantidad || 0);\n                  } else {\n                    salarioBase = p.salariopordia || 0;\n                    const meta = p.metaestablecida || 0;\n                    if (cantidad > meta) {\n                      const extra = cantidad - meta;\n                      bonificacion = extra * (p.bonificacion || 0);\n                    }\n                  }\n                }\n                return sum + salarioBase + bonificacion + viatico;\n              }, 0);\n              return /*#__PURE__*/_jsxDEV(React.Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"bg-white\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-2\",\n                    children: p.nombrecompleto\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 408,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-2\",\n                    children: p.puesto\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 409,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-2\",\n                    children: p.proyecto\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 410,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-2\",\n                    children: [\"Q\", ((_p$salariopordia = p.salariopordia) === null || _p$salariopordia === void 0 ? void 0 : _p$salariopordia.toFixed(2)) || '-']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 411,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-2\",\n                    children: p.metaestablecida || '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 412,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-2\",\n                    children: [\"Q\", ((_p$bonificacion = p.bonificacion) === null || _p$bonificacion === void 0 ? void 0 : _p$bonificacion.toFixed(2)) || '-']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-2\",\n                    children: p.trabajometa || '-'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 414,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-2\",\n                    children: ultimoGrupo\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-2\",\n                    children: p.caja_chica_asignada ? 'Sí' : 'No'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 416,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border p-2\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-col gap-1 items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => setHistorialVisible(mostrarDetalle ? null : p.nombrecompleto),\n                        className: \"text-blue-600 font-medium hover:text-blue-800 underline\",\n                        children: mostrarDetalle ? 'Ocultar' : 'Ver detalle'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 419,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => setTrabajadorEnEdicion(p),\n                        className: \"text-blue-600 font-medium hover:text-blue-800 underline\",\n                        children: \"Editar datos\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 423,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 418,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 417,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 23\n                }, this), (trabajadorEnEdicion === null || trabajadorEnEdicion === void 0 ? void 0 : trabajadorEnEdicion.id) === p.id && /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: /*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"10\",\n                    className: \"p-4 bg-gray-50\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                      className: \"font-bold mb-2\",\n                      children: [\"\\u270F\\uFE0F Editando datos de \", p.nombrecompleto]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 435,\n                      columnNumber: 7\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                        className: \"border p-2 rounded\",\n                        value: trabajadorEnEdicion.puesto,\n                        onChange: e => setTrabajadorEnEdicion({\n                          ...trabajadorEnEdicion,\n                          puesto: e.target.value\n                        }),\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"\",\n                          children: \"Selecciona un puesto\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 443,\n                          columnNumber: 3\n                        }, this), puestosList.map((puesto, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: puesto.nombre,\n                          children: puesto.nombre\n                        }, i, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 445,\n                          columnNumber: 5\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 438,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                        className: \"border p-2 rounded\",\n                        value: trabajadorEnEdicion.proyecto,\n                        onChange: e => setTrabajadorEnEdicion({\n                          ...trabajadorEnEdicion,\n                          proyecto: e.target.value\n                        }),\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"\",\n                          children: \"Selecciona un proyecto\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 455,\n                          columnNumber: 3\n                        }, this), proyectosList.map((proy, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: proy.nombre,\n                          children: proy.nombre\n                        }, i, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 457,\n                          columnNumber: 5\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 450,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        className: \"border p-2 rounded\",\n                        value: trabajadorEnEdicion.salariopordia,\n                        onChange: e => setTrabajadorEnEdicion({\n                          ...trabajadorEnEdicion,\n                          salariopordia: parseFloat(e.target.value)\n                        }),\n                        placeholder: \"Salario por d\\xEDa\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 462,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        className: \"border p-2 rounded\",\n                        value: trabajadorEnEdicion.metaestablecida,\n                        onChange: e => setTrabajadorEnEdicion({\n                          ...trabajadorEnEdicion,\n                          metaestablecida: parseInt(e.target.value)\n                        }),\n                        placeholder: \"Meta establecida\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 471,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        className: \"border p-2 rounded\",\n                        value: trabajadorEnEdicion.bonificacion,\n                        onChange: e => setTrabajadorEnEdicion({\n                          ...trabajadorEnEdicion,\n                          bonificacion: parseFloat(e.target.value)\n                        }),\n                        placeholder: \"Bonificaci\\xF3n\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 480,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"border p-2 rounded\",\n                        value: trabajadorEnEdicion.trabajometa,\n                        onChange: e => setTrabajadorEnEdicion({\n                          ...trabajadorEnEdicion,\n                          trabajometa: e.target.value\n                        }),\n                        placeholder: \"Trabajo asignado\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 489,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        className: \"border p-2 rounded\",\n                        value: trabajadorEnEdicion.numerogrupo || \"\",\n                        onChange: e => setTrabajadorEnEdicion({\n                          ...trabajadorEnEdicion,\n                          numerogrupo: parseInt(e.target.value)\n                        }),\n                        placeholder: \"No. de grupo\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 498,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                        className: \"border p-2 rounded\",\n                        value: trabajadorEnEdicion.caja_chica_asignada ? \"si\" : \"no\",\n                        onChange: e => setTrabajadorEnEdicion({\n                          ...trabajadorEnEdicion,\n                          caja_chica_asignada: e.target.value === \"si\"\n                        }),\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"no\",\n                          children: \"Caja chica: No\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 517,\n                          columnNumber: 11\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"si\",\n                          children: \"Caja chica: S\\xED\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 518,\n                          columnNumber: 11\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 507,\n                        columnNumber: 9\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 436,\n                      columnNumber: 7\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex gap-4 mt-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: async () => {\n                          const {\n                            error\n                          } = await supabase.from(\"registrodepersonal\").update(trabajadorEnEdicion).eq(\"id\", trabajadorEnEdicion.id);\n                          if (!error) {\n                            alert(\"Datos actualizados correctamente\");\n                            setTrabajadorEnEdicion(null);\n                            obtenerPersonal();\n                          } else {\n                            alert(\"Hubo un error\");\n                            console.error(error);\n                          }\n                        },\n                        className: \"bg-green-600 text-white px-4 py-2 rounded\",\n                        children: \"Guardar cambios\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 523,\n                        columnNumber: 9\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => setTrabajadorEnEdicion(null),\n                        className: \"bg-gray-400 text-white px-4 py-2 rounded\",\n                        children: \"Cancelar\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 544,\n                        columnNumber: 9\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 522,\n                      columnNumber: 7\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 434,\n                    columnNumber: 5\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 3\n                }, this)]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 9\n    }, this), mostrarDetalle && /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: /*#__PURE__*/_jsxDEV(\"td\", {\n        colSpan: \"10\",\n        className: \"p-4 text-center align-top\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-block text-left w-full max-w-4xl bg-gray-100 p-4 rounded shadow border border-gray-300\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold mb-2\",\n            children: [\"\\uD83D\\uDCCB Reportes diarios de \", p.nombrecompleto]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full text-sm border mt-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                className: \"bg-gray-200\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-2\",\n                    children: \"Fecha\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 577,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-2\",\n                    children: \"Cantidad\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 578,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-2\",\n                    children: \"Vi\\xE1ticos\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 579,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-2\",\n                    children: \"Comentario\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 580,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-2\",\n                    children: \"Reportado por\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 581,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-2\",\n                    children: \"Pago meta diaria\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 582,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-2\",\n                    children: \"Pago del d\\xEDa\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 583,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-2\",\n                    children: \"Pago total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 584,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border p-2\",\n                    children: \"Acciones\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 585,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 576,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: reportesPersona.map((r, idx) => {\n                  const sePresento = r.sepresentoatrabajar === \"Sí\";\n                  const cantidad = r.cantidad || 0;\n                  const salarioDia = r.salariopordia || 0;\n                  const metaEstablecida = r.metaestablecida || 0;\n                  const bonificacionUnidad = r.bonificacion || 0;\n                  const pagoPorUnidad = r.precioporcantidad || 0;\n                  const pagoMeta = sePresento && cantidad > metaEstablecida ? (cantidad - metaEstablecida) * bonificacionUnidad : 0;\n                  const pagoDia = sePresento ? r.modalidad === \"día\" ? salarioDia : cantidad * pagoPorUnidad : 0;\n                  const total = pagoDia + pagoMeta + (r.viaticos || 0);\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-2\",\n                      children: r.fechareporte\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 609,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-2\",\n                      children: cantidad\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 610,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-2\",\n                      children: [\"Q\", (r.viaticos || 0).toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 611,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-2\",\n                      children: r.comentario || \"--\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 612,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-2\",\n                      children: r.reportadopor || \"Desconocido\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 613,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-2\",\n                      children: pagoMeta > 0 ? `Q${pagoMeta.toFixed(2)}` : \"--\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 614,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-2\",\n                      children: pagoDia > 0 ? `Q${pagoDia.toFixed(2)}` : \"--\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 615,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-2 font-semibold text-green-700\",\n                      children: [\"Q\", total.toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 616,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border p-2\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"text-blue-500 hover:underline\",\n                        onClick: () => setReporteEnEdicion(r),\n                        children: \"Editar\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 618,\n                        columnNumber: 23\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 617,\n                      columnNumber: 21\n                    }, this)]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 608,\n                    columnNumber: 19\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 9\n          }, this), p.caja_chica_asignada && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white shadow-md rounded-xl p-4 mt-10\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold text-gray-800 mb-4\",\n              children: \"\\uD83E\\uDDFE Gastos de caja chica\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-4 text-sm text-gray-600\",\n              children: [\"Asignado: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: [\"Q\", (p.monto_caja_chica || 0).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 636,\n                columnNumber: 25\n              }, this), \" |\", \" \", \"Gastado: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-red-600 font-semibold\",\n                children: [\"Q\", gastosCajaChica.filter(g => g.nombre_trabajador === p.nombrecompleto).reduce((sum, g) => sum + (g.costo || 0), 0).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 24\n              }, this), \" |\", \" \", \"Disponible: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-700 font-semibold\",\n                children: [\"Q\", ((p.monto_caja_chica || 0) - gastosCajaChica.filter(g => g.nombre_trabajador === p.nombrecompleto).reduce((sum, g) => sum + (g.costo || 0), 0)).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overflow-x-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"min-w-full text-sm text-left text-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  className: \"bg-gray-100 text-xs uppercase font-semibold text-gray-600\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-3\",\n                      children: \"Fecha\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 652,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-3\",\n                      children: \"No. Factura\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 653,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-3\",\n                      children: \"Proveedor\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 654,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-3\",\n                      children: \"Comentario\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 655,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-3\",\n                      children: \"Proyecto\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 656,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"px-4 py-3\",\n                      children: \"Costo\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 657,\n                      columnNumber: 21\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 651,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 650,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: gastosCajaChica.filter(g => g.nombre_trabajador === p.nombrecompleto).length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: /*#__PURE__*/_jsxDEV(\"td\", {\n                      colSpan: \"6\",\n                      className: \"text-center py-4 text-gray-500\",\n                      children: \"Sin registros a\\xFAn\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 663,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 662,\n                    columnNumber: 21\n                  }, this) : gastosCajaChica.filter(g => g.nombre_trabajador === p.nombrecompleto).map(gasto => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"hover:bg-gray-50 transition-all border-b\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3\",\n                      children: gasto.fecha\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 670,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3\",\n                      children: gasto.nofactura\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 671,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3\",\n                      children: gasto.proveedor\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 672,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3\",\n                      children: gasto.comentario\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 673,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3\",\n                      children: gasto.proyecto\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 674,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"px-4 py-3 font-semibold text-green-700\",\n                      children: [\"Q\", gasto.costo.toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 675,\n                      columnNumber: 27\n                    }, this)]\n                  }, gasto.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 669,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 660,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 633,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 568,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n        className: \"bg-gray-100 font-bold\",\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          className: \"border p-2 text-right\",\n          colSpan: 7,\n          children: \"Total acumulado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          className: \"border p-2 text-right\",\n          children: [\"Q\", reportesPersona.reduce((sum, r) => {\n            const cantidad = r.cantidad || 0;\n            const sePresento = r.sepresentoatrabajar === \"Sí\";\n            let salarioBase = 0;\n            let bonificacion = 0;\n            const viatico = sePresento ? r.viaticos || 0 : 0;\n            if (sePresento) {\n              if (p.modalidad === 'cantidad') {\n                salarioBase = cantidad * (p.precioporcantidad || 0);\n              } else {\n                salarioBase = p.salariopordia || 0;\n                const meta = p.metaestablecida || 0;\n                if (cantidad > meta) {\n                  const extra = cantidad - meta;\n                  bonificacion = extra * (p.bonificacion || 0);\n                }\n              }\n            }\n            return sum + salarioBase + bonificacion + viatico;\n          }, 0).toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 694,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: /*#__PURE__*/_jsxDEV(\"td\", {\n          colSpan: \"10\",\n          className: \"p-4\",\n          children: /*#__PURE__*/_jsxDEV(AgregarReporte, {\n            trabajador: p,\n            usuario: usuario,\n            onGuardar: obtenerReportes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 723,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true), reporteEnEdicion && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 bg-yellow-50 p-4 rounded shadow border border-yellow-300\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"font-semibold mb-2\",\n        children: [\"\\u270F\\uFE0F Editar reporte del \", reporteEnEdicion.fechareporte]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 736,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          className: \"border p-2 rounded\",\n          value: reporteEnEdicion.cantidad,\n          onChange: e => setReporteEnEdicion({\n            ...reporteEnEdicion,\n            cantidad: parseInt(e.target.value)\n          }),\n          placeholder: \"Cantidad\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          className: \"border p-2 rounded\",\n          value: reporteEnEdicion.viaticos,\n          onChange: e => setReporteEnEdicion({\n            ...reporteEnEdicion,\n            viaticos: parseFloat(e.target.value)\n          }),\n          placeholder: \"Vi\\xE1ticos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 747,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"border p-2 rounded col-span-2\",\n          value: reporteEnEdicion.comentario,\n          onChange: e => setReporteEnEdicion({\n            ...reporteEnEdicion,\n            comentario: e.target.value\n          }),\n          placeholder: \"Comentario\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-4 mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-green-600 text-white px-4 py-2 rounded\",\n          onClick: async () => {\n            if (!(reporteEnEdicion !== null && reporteEnEdicion !== void 0 && reporteEnEdicion.id)) {\n              alert(\"No se puede actualizar: falta el ID del reporte.\");\n              return;\n            }\n            const actualizado = {\n              cantidad: parseInt(reporteEnEdicion.cantidad),\n              viaticos: parseFloat(reporteEnEdicion.viaticos),\n              comentario: reporteEnEdicion.comentario || \"--\",\n              sepresentoatrabajar: reporteEnEdicion.sepresetentoatrabajar || \"Sí\",\n              numerogrupo: reporteEnEdicion.numerogrupo || null,\n              salariopordia: parseFloat(reporteEnEdicion.salariopordia || 0),\n              metaestablecida: parseInt(reporteEnEdicion.metaestablecida || 0),\n              bonificacion: parseFloat(reporteEnEdicion.bonificacion || 0),\n              modalidad: reporteEnEdicion.modalidad || \"día\",\n              precioporcantidad: parseFloat(reporteEnEdicion.precioporcantidad || 0),\n              proyecto: reporteEnEdicion.proyecto || \"\"\n            };\n            const {\n              error\n            } = await supabase.from(\"reportesdiarios\").update(actualizado).eq(\"id\", reporteEnEdicion.id);\n            if (!error) {\n              alert(\"Reporte actualizado correctamente\");\n              setReporteEnEdicion(null); // salir del modo edición\n              obtenerReportes(); // refrescar tabla\n            } else {\n              console.error(\"Error al actualizar:\", error);\n              alert(\"Ocurrió un error al actualizar el reporte\");\n            }\n          },\n          children: \"Guardar cambios\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setReporteEnEdicion(null),\n          className: \"bg-gray-500 text-white px-4 py-2 rounded\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 805,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 764,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 735,\n      columnNumber: 3\n    }, this), vista === 'planilla' && historialVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 bg-gray-100 p-4 rounded\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-bold text-lg mb-2\",\n        children: [\"\\uD83D\\uDCD8 Detalle de reportes de \", historialVisible]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 817,\n        columnNumber: 11\n      }, this), reportes.filter(r => r.nombretrabajador === historialVisible).map((r, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uD83D\\uDCC5 \", r.fechareporte, \" \\u2014 \", r.cantidad, \" unidades \\u2014 Vi\\xE1ticos: Q\", (r.viaticos || 0).toFixed(2), \" \\u2014 \", r.comentario || 'sin comentario']\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 823,\n        columnNumber: 15\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setHistorialVisible(null),\n        className: \"mt-4 text-red-600 underline\",\n        children: \"Cerrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 825,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 816,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 5\n  }, this);\n}\n_s(Personal, \"SiwTwBhXYe6XM5MJDlCSQuLE/JY=\");\n_c = Personal;\nvar _c;\n$RefreshReg$(_c, \"Personal\");","map":{"version":3,"names":["useState","useEffect","supabase","React","AgregarReporte","jsxDEV","_jsxDEV","Fragment","_Fragment","Personal","usuario","_s","vista","setVista","personal","setPersonal","reportes","setReportes","puestosList","setPuestosList","proyectosList","setProyectosList","historialVisible","setHistorialVisible","nuevoPuesto","setNuevoPuesto","nuevoProyecto","setNuevoProyecto","gastosCajaChica","setGastosCajaChica","reporteEnEdicion","setReporteEnEdicion","trabajadorEnEdicion","setTrabajadorEnEdicion","nuevoPersonal","setNuevoPersonal","nombre","puesto","proyecto","salario","meta","bonificacion","trabajometa","fecha","modalidad","precioporcantidad","cajaChica","montoCajaChica","viaticosDiarios","fetchGastos","data","error","from","select","order","ascending","fetchPuestos","fetchProyectos","obtenerPersonal","obtenerReportes","totalAcumulado","reportesPersona","reduce","sum","r","cantidad","sePresento","sepresentoatrabajar","salarioBase","viatico","viaticos","p","salariopordia","metaestablecida","extra","agregarPuesto","insert","console","message","alert","length","agregarProyecto","handleAgregar","existente","eq","single","registro","parseInt","parseFloat","fechadeingreso","Date","toISOString","caja_chica_asignada","monto_caja_chica","viaticos_diarios","update","id","nombrecompleto","calcularRealizado","filter","nombretrabajador","calcularViaticos","calcularPago","reportesTrabajador","realizadoTotal","bonif","agrupadosPorDia","fechareporte","dia","totalDia","pagoBase","total","realizado","pago","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","placeholder","value","onChange","e","target","map","item","i","_p$salariopordia","_p$bonificacion","mostrarDetalle","ultimoGrupo","numerogrupo","toFixed","colSpan","proy","idx","salarioDia","metaEstablecida","bonificacionUnidad","pagoPorUnidad","pagoMeta","pagoDia","comentario","reportadopor","g","nombre_trabajador","costo","gasto","nofactura","proveedor","trabajador","onGuardar","actualizado","sepresetentoatrabajar","_c","$RefreshReg$"],"sources":["C:/Users/garci/Downloads/nimbus-login-app/src/componentes/Personal.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { supabase } from '../supabase';\r\nimport React from 'react';\r\nimport AgregarReporte from './AgregarReporte';\r\nexport default function Personal({ usuario }) {\r\n  const [vista, setVista] = useState('planilla');\r\n  const [personal, setPersonal] = useState([]);\r\n  const [reportes, setReportes] = useState([]);\r\n  const [puestosList, setPuestosList] = useState([]);\r\n  const [proyectosList, setProyectosList] = useState([]);\r\n  const [historialVisible, setHistorialVisible] = useState(null);\r\n  const [nuevoPuesto, setNuevoPuesto] = useState('');\r\n  const [nuevoProyecto, setNuevoProyecto] = useState('');\r\n  const [gastosCajaChica, setGastosCajaChica] = useState([]);\r\n  const [reporteEnEdicion, setReporteEnEdicion] = useState(null);\r\n  const [trabajadorEnEdicion, setTrabajadorEnEdicion] = useState(null);\r\n  const [nuevoPersonal, setNuevoPersonal] = useState({\r\n    \r\n    nombre: '',\r\n    puesto: '',\r\n    proyecto: '',\r\n    salario: '',\r\n    meta: '',\r\n    bonificacion: '',\r\n    trabajometa: '',\r\n    fecha: '',\r\n    modalidad: 'día',\r\n    precioporcantidad: '',\r\n    cajaChica: 'no',\r\n    montoCajaChica: '',\r\n    viaticosDiarios: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n  const fetchGastos = async () => {\r\n    const { data, error } = await supabase\r\n      .from(\"gastos_cajachica\")\r\n      .select(\"*\")\r\n      .order(\"fecha\", { ascending: false });\r\n    if (!error) setGastosCajaChica(data);\r\n  };\r\n  fetchGastos();\r\n}, []);\r\n\r\n  useEffect(() => {\r\n    fetchPuestos();\r\n    fetchProyectos();\r\n    obtenerPersonal();\r\n    obtenerReportes();\r\n  }, []);\r\n\r\nconst totalAcumulado = (reportesPersona) => {\r\n  return reportesPersona.reduce((sum, r) => {\r\n    const cantidad = r.cantidad || 0;\r\n    const sePresento = r.sepresentoatrabajar === \"Sí\";\r\n    let salarioBase = 0;\r\n    let bonificacion = 0;\r\n    const viatico = sePresento ? (r.viaticos || 0) : 0;\r\n\r\n    if (sePresento) {\r\n      if (p.modalidad === 'cantidad') {\r\n        salarioBase = cantidad * (p.precioporcantidad || 0);\r\n      } else {\r\n        salarioBase = p.salariopordia || 0;\r\n        const meta = p.metaestablecida || 0;\r\n        if (cantidad > meta) {\r\n          const extra = cantidad - meta;\r\n          bonificacion = extra * (p.bonificacion || 0);\r\n        }\r\n      }\r\n    }\r\n\r\n    return sum + salarioBase + bonificacion + viatico;\r\n  }, 0);\r\n};\r\n  \r\n  const fetchPuestos = async () => {\r\n    const { data, error } = await supabase.from('puestos').select('*').order('nombre', { ascending: true });\r\n    if (!error) setPuestosList(data);\r\n  };\r\n\r\n  const fetchProyectos = async () => {\r\n    const { data, error } = await supabase.from('proyectos').select('*').order('nombre', { ascending: true });\r\n    if (!error) setProyectosList(data);\r\n  };\r\n\r\n  const agregarPuesto = async () => {\r\n  if (!nuevoPersonal.puesto) return;\r\n\r\n  const { data, error } = await supabase\r\n    .from('puestos')\r\n    .insert([{ nombre: nuevoPersonal.puesto }])\r\n    .select(); \r\n\r\n  if (error) {\r\n    console.error('Error al guardar puesto:', error.message);\r\n    alert('No se pudo guardar el puesto');\r\n    return;\r\n  }\r\n\r\n  if (data && data.length > 0) {\r\n    setNuevoPersonal(p => ({ ...p, puesto: data[0].nombre }));\r\n  }\r\n\r\n  setNuevoPuesto('');\r\n  fetchPuestos();\r\n};\r\n\r\n  const agregarProyecto = async () => {\r\n  if (!nuevoPersonal.proyecto) return;\r\n\r\n  const { data, error } = await supabase\r\n    .from('proyectos')\r\n    .insert([{ nombre: nuevoPersonal.proyecto }])\r\n    .select(); // Esto hace que Supabase devuelva los datos insertados\r\n\r\n  if (error) {\r\n    console.error('Error al guardar proyecto:', error.message);\r\n    alert('No se pudo guardar el proyecto');\r\n    return;\r\n  }\r\n\r\n  if (data && data.length > 0) {\r\n    setNuevoPersonal(p => ({ ...p, proyecto: data[0].nombre }));\r\n  }\r\n\r\n  setNuevoProyecto('');\r\n  fetchProyectos();\r\n};\r\n\r\n   const obtenerPersonal = async () => {\r\n    const { data, error } = await supabase\r\n      .from('registrodepersonal')\r\n      .select('*')\r\n      .order('created_at', { ascending: false });\r\n    if (!error) setPersonal(data);\r\n  };\r\n\r\n  const obtenerReportes = async () => {\r\n    const { data, error } = await supabase\r\n      .from('reportesdiarios')\r\n      .select('*');\r\n    if (!error) setReportes(data);\r\n  };\r\n\r\n\r\n  const handleAgregar = async () => {\r\n    if (!nuevoPersonal.nombre || !nuevoPersonal.puesto) {\r\n      alert('El nombre y puesto son obligatorios');\r\n      return;\r\n    }\r\n    if (nuevoPersonal.modalidad === 'día' && !nuevoPersonal.salario) {\r\n      alert('El salario por día es obligatorio');\r\n      return;\r\n    }\r\n    if (nuevoPersonal.modalidad === 'cantidad' && !nuevoPersonal.precioporcantidad) {\r\n      alert('El precio por unidad es obligatorio');\r\n      return;\r\n    }\r\n    if (nuevoPersonal.cajaChica === 'si' && !nuevoPersonal.montoCajaChica) {\r\n      alert('El monto de caja chica es obligatorio si está asignada');\r\n      return;\r\n    }\r\n\r\n    const { data: existente } = await supabase\r\n      .from('registrodepersonal')\r\n      .select('*')\r\n      .eq('nombrecompleto', nuevoPersonal.nombre)\r\n      .single();\r\n\r\n    const registro = {\r\n      proyecto: nuevoPersonal.proyecto,\r\n      metaestablecida: parseInt(nuevoPersonal.meta) || null,\r\n      modalidad: nuevoPersonal.modalidad,\r\n      bonificacion: parseFloat(nuevoPersonal.bonificacion) || 0,\r\n      fechadeingreso: nuevoPersonal.fecha || new Date().toISOString(),\r\n      precioporcantidad: nuevoPersonal.modalidad === 'cantidad' ? parseFloat(nuevoPersonal.precioporcantidad) : null,\r\n      salariopordia: nuevoPersonal.modalidad === 'día' ? parseFloat(nuevoPersonal.salario) : null,\r\n      trabajometa: nuevoPersonal.trabajometa,\r\n      caja_chica_asignada: nuevoPersonal.cajaChica === 'si',\r\n      monto_caja_chica: nuevoPersonal.cajaChica === 'si' ? parseFloat(nuevoPersonal.montoCajaChica) : null,\r\n      viaticos_diarios: parseFloat(nuevoPersonal.viaticosDiarios) || 0\r\n    };\r\n\r\n    if (existente) {\r\n      await supabase.from('registrodepersonal').update(registro).eq('id', existente.id);\r\n    } else {\r\n      await supabase.from('registrodepersonal').insert([{ nombrecompleto: nuevoPersonal.nombre, puesto: nuevoPersonal.puesto, ...registro }]);\r\n    }\r\n\r\n    setNuevoPersonal({\r\n      nombre: '', puesto: '', proyecto: '', salario: '', meta: '', bonificacion: '', trabajometa: '', fecha: '',\r\n      modalidad: 'día', precioporcantidad: '', cajaChica: 'no', montoCajaChica: '', viaticosDiarios: ''\r\n    });\r\n    setVista('planilla');\r\n    obtenerPersonal();\r\n  };\r\n\r\n  const calcularRealizado = nombre =>\r\n    reportes.filter(r => r.nombretrabajador === nombre).reduce((sum, r) => sum + (r.cantidad || 0), 0);\r\n\r\n  const calcularViaticos = nombre =>\r\n    reportes.filter(r => r.nombretrabajador === nombre).reduce((sum, r) => sum + (r.viaticos || 0), 0);\r\n\r\n  const calcularPago = (p) => {\r\n  // Filtrar reportes por trabajador\r\n  const reportesTrabajador = reportes.filter(r => r.nombretrabajador === p.nombrecompleto);\r\n\r\n  let realizadoTotal = 0;\r\n  let bonif = 0;\r\n\r\n  if (p.modalidad === 'día' && p.metaestablecida) {\r\n    // Agrupar por fecha y calcular extra diario\r\n    const agrupadosPorDia = {};\r\n    for (const r of reportesTrabajador) {\r\n      if (!agrupadosPorDia[r.fechareporte]) agrupadosPorDia[r.fechareporte] = 0;\r\n      agrupadosPorDia[r.fechareporte] += r.cantidad || 0;\r\n    }\r\n    for (const dia in agrupadosPorDia) {\r\n      const totalDia = agrupadosPorDia[dia];\r\n      realizadoTotal += totalDia;\r\n      if (totalDia > p.metaestablecida) {\r\n        bonif += (totalDia - p.metaestablecida) * (p.bonificacion || 0);\r\n      }\r\n    }\r\n  } else {\r\n    realizadoTotal = reportesTrabajador.reduce((sum, r) => sum + (r.cantidad || 0), 0);\r\n    if (p.modalidad === 'cantidad') {\r\n      bonif = realizadoTotal >= (p.metaestablecida || 0) ? p.bonificacion : 0;\r\n    }\r\n  }\r\n\r\n  const pagoBase = p.modalidad === 'cantidad' ? realizadoTotal * p.precioporcantidad : p.salariopordia || 0;\r\n  const total = pagoBase + bonif;\r\n\r\n  return { realizado: realizadoTotal, pago: pagoBase, bonif, total };\r\n};\r\n\r\n\r\n  return (\r\n    <div className=\"mt-6 max-w-7xl mx-auto bg-white/10 backdrop-blur-xl p-6 rounded-2xl\">\r\n      <h2 className=\"text-2xl font-bold mb-6 text-center\">👷 Gestión de Personal</h2>\r\n      <div className=\"flex justify-center gap-4 mb-6\">\r\n        <button\r\n          onClick={() => setVista('formulario')}\r\n          className={`px-4 py-2 rounded ${vista === 'formulario' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}\r\n        >Agregar personal</button>\r\n        <button\r\n          onClick={() => setVista('planilla')}\r\n          className={`px-4 py-2 rounded ${vista === 'planilla' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}\r\n        >Planilla completa</button>\r\n      </div>\r\n\r\n      {vista === 'formulario' && (\r\n  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n    <input\r\n      type=\"text\"\r\n      placeholder=\"Nombre completo\"\r\n      value={nuevoPersonal.nombre}\r\n      onChange={e => setNuevoPersonal({ ...nuevoPersonal, nombre: e.target.value })}\r\n      className=\"border p-2 rounded\"\r\n    />\r\n\r\n    {/* Puesto con opción de agregar */}\r\n    {nuevoPuesto === '' ? (\r\n      <div className=\"flex gap-2\">\r\n        <select\r\n          value={nuevoPersonal.puesto}\r\n          onChange={e => setNuevoPersonal({ ...nuevoPersonal, puesto: e.target.value })}\r\n          className=\"border p-2 rounded flex-1\"\r\n        >\r\n          <option value=\"\">Seleccionar puesto...</option>\r\n          {puestosList.map((item, i) => (\r\n            <option key={i} value={item.nombre}>{item.nombre}</option>\r\n          ))}\r\n        </select>\r\n        <button onClick={() => setNuevoPuesto('nuevo')} className=\"bg-green-600 text-white px-3 py-2 rounded\">+ Puesto</button>\r\n      </div>\r\n    ) : (\r\n      <div className=\"flex gap-2\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Nuevo puesto\"\r\n          value={nuevoPersonal.puesto}\r\n          onChange={e => setNuevoPersonal({ ...nuevoPersonal, puesto: e.target.value })}\r\n          className=\"border p-2 rounded flex-1\"\r\n        />\r\n        <button onClick={agregarPuesto} className=\"bg-blue-600 text-white px-3 py-2 rounded\">Guardar</button>\r\n        <button onClick={() => { setNuevoPuesto(''); setNuevoPersonal({ ...nuevoPersonal, puesto: '' }); }} className=\"bg-gray-400 text-white px-3 py-2 rounded\">Cancelar</button>\r\n      </div>\r\n    )}\r\n\r\n\r\n    {/* Proyecto con opción de agregar */}\r\n    {nuevoProyecto === '' ? (\r\n      <div className=\"flex gap-2\">\r\n        <select\r\n          value={nuevoPersonal.proyecto}\r\n          onChange={e => setNuevoPersonal({ ...nuevoPersonal, proyecto: e.target.value })}\r\n          className=\"border p-2 rounded flex-1\"\r\n        >\r\n          <option value=\"\">Seleccionar proyecto...</option>\r\n          {proyectosList.map((item, i) => (\r\n            <option key={i} value={item.nombre}>{item.nombre}</option>\r\n          ))}\r\n        </select>\r\n        <button onClick={() => setNuevoProyecto('nuevo')} className=\"bg-green-600 text-white px-3 py-2 rounded\">+ Proyecto</button>\r\n      </div>\r\n    ) : (\r\n      <div className=\"flex gap-2\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Nuevo proyecto\"\r\n          value={nuevoPersonal.proyecto}\r\n          onChange={e => setNuevoPersonal({ ...nuevoPersonal, proyecto: e.target.value })}\r\n          className=\"border p-2 rounded flex-1\"\r\n        />\r\n        <button onClick={agregarProyecto} className=\"bg-blue-600 text-white px-3 py-2 rounded\">Guardar</button>\r\n        <button onClick={() => { setNuevoProyecto(''); setNuevoPersonal({ ...nuevoPersonal, proyecto: '' }); }} className=\"bg-gray-400 text-white px-3 py-2 rounded\">Cancelar</button>\r\n      </div>\r\n    )}\r\n\r\n    {/* Modalidad */}\r\n    <select\r\n      value={nuevoPersonal.modalidad}\r\n      onChange={e => setNuevoPersonal({ ...nuevoPersonal, modalidad: e.target.value })}\r\n      className=\"border p-2 rounded\"\r\n    >\r\n      <option value=\"día\">Día</option>\r\n      <option value=\"cantidad\">Cantidad</option>\r\n    </select>\r\n\r\n          {nuevoPersonal.modalidad === 'día' && <input type=\"number\" placeholder=\"Salario por día\" value={nuevoPersonal.salario} onChange={e => setNuevoPersonal({ ...nuevoPersonal, salario: e.target.value })} className=\"border p-2 rounded\" />}          \r\n          {nuevoPersonal.modalidad === 'cantidad' && <input type=\"number\" placeholder=\"Precio por unidad\" value={nuevoPersonal.precioporcantidad} onChange={e => setNuevoPersonal({ ...nuevoPersonal, precioporcantidad: e.target.value })} className=\"border p-2 rounded\" />}          \r\n            \r\n          <input type=\"number\" placeholder=\"Meta establecida\" value={nuevoPersonal.meta} onChange={e => setNuevoPersonal({ ...nuevoPersonal, meta: e.target.value })} className=\"border p-2 rounded\" />\r\n          <input type=\"number\" placeholder=\"Bonificación meta (Q por unidad extra)\" value={nuevoPersonal.bonificacion} onChange={e => setNuevoPersonal({ ...nuevoPersonal, bonificacion: e.target.value })} className=\"border p-2 rounded\" />\r\n          <input type=\"text\" placeholder=\"Trabajo asignado (meta)\" value={nuevoPersonal.trabajometa} onChange={e => setNuevoPersonal({ ...nuevoPersonal, trabajometa: e.target.value })} className=\"border p-2 rounded\" />\r\n          <input type=\"date\" value={nuevoPersonal.fecha} onChange={e => setNuevoPersonal({ ...nuevoPersonal, fecha: e.target.value })} className=\"border p-2 rounded\" />\r\n\r\n          <select value={nuevoPersonal.cajaChica} onChange={e => setNuevoPersonal({ ...nuevoPersonal, cajaChica: e.target.value })} className=\"border p-2 rounded\">\r\n            <option value=\"no\">Caja chica: No</option>\r\n            <option value=\"si\">Caja chica: Sí</option>\r\n          </select>\r\n          {nuevoPersonal.cajaChica === 'si' && <input type=\"number\" placeholder=\"Monto de caja chica\" value={nuevoPersonal.montoCajaChica} onChange={e => setNuevoPersonal({ ...nuevoPersonal, montoCajaChica: e.target.value })} className=\"border p-2 rounded\" />}          \r\n\r\n          <input type=\"number\" placeholder=\"Viáticos diarios\" value={nuevoPersonal.viaticosDiarios} onChange={e => setNuevoPersonal({ ...nuevoPersonal, viaticosDiarios: e.target.value })} className=\"border p-2 rounded\" />\r\n\r\n          <button onClick={handleAgregar} className=\"bg-green-600 text-white py-2 rounded col-span-2\">\r\n      Guardar Personal\r\n    </button>\r\n  </div>\r\n)}\r\n\r\n      {/* Planilla */}\r\n      {vista === 'planilla' && (\r\n        <div className=\"w-full flex justify-center\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-max border border-gray-300 text-sm text-center\">\r\n              <thead className=\"bg-gray-100\">\r\n                <tr>\r\n                  <th className=\"px-4 py-2 border\">Trabajador</th>\r\n                  <th className=\"px-4 py-2 border\">Puesto</th>\r\n                  <th className=\"px-4 py-2 border\">Proyecto</th>\r\n                  <th className=\"px-4 py-2 border\">Salario por día</th>\r\n                  <th className=\"px-4 py-2 border\">Meta establecida</th>\r\n                  <th className=\"px-4 py-2 border\">Pago por unidad extra</th>\r\n                  <th className=\"px-4 py-2 border\">Trabajo asignado</th>\r\n                  <th className=\"px-4 py-2 border\">No. de grupo</th>\r\n                  <th className=\"px-4 py-2 border\">Caja chica</th>\r\n                  <th className=\"px-4 py-2 border\">Ver detalle</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n          {personal.map((p, i) => {\r\n                  const reportesPersona = reportes.filter(r => r.nombretrabajador === p.nombrecompleto);\r\n                  const mostrarDetalle = historialVisible === p.nombrecompleto;\r\n                  const ultimoGrupo = reportesPersona.length > 0 ? reportesPersona[reportesPersona.length - 1].numerogrupo || '-' : '-';\r\n\r\n\r\n          const totalAcumulado = reportesPersona.reduce((sum, r) => {\r\n            const cantidad = r.cantidad || 0;\r\n            const sePresento = r.sepresentoatrabajar === \"Sí\";\r\n            let salarioBase = 0;\r\n            let bonificacion = 0;\r\n            const viatico = sePresento ? (r.viaticos || 0) : 0;\r\n\r\n            if (sePresento) {\r\n              if (p.modalidad === 'cantidad') {\r\n                salarioBase = cantidad * (p.precioporcantidad || 0);\r\n              } else {\r\n                salarioBase = p.salariopordia || 0;\r\n                const meta = p.metaestablecida || 0;\r\n                if (cantidad > meta) {\r\n                  const extra = cantidad - meta;\r\n                  bonificacion = extra * (p.bonificacion || 0);\r\n                }\r\n              }\r\n            }\r\n\r\n            return sum + salarioBase + bonificacion + viatico;\r\n          }, 0);\r\n\r\n          \r\n                  return (\r\n                    <React.Fragment key={i}>\r\n                      <tr className=\"bg-white\">\r\n                        <td className=\"border p-2\">{p.nombrecompleto}</td>\r\n                        <td className=\"border p-2\">{p.puesto}</td>\r\n                        <td className=\"border p-2\">{p.proyecto}</td>\r\n                        <td className=\"border p-2\">Q{p.salariopordia?.toFixed(2) || '-'}</td>\r\n                        <td className=\"border p-2\">{p.metaestablecida || '-'}</td>\r\n                        <td className=\"border p-2\">Q{p.bonificacion?.toFixed(2) || '-'}</td>\r\n                        <td className=\"border p-2\">{p.trabajometa || '-'}</td>\r\n                        <td className=\"border p-2\">{ultimoGrupo}</td>\r\n                        <td className=\"border p-2\">{p.caja_chica_asignada ? 'Sí' : 'No'}</td>\r\n                        <td className=\"border p-2\">\r\n                          <div className=\"flex flex-col gap-1 items-center\">\r\n                            <button\r\n                              onClick={() => setHistorialVisible(mostrarDetalle ? null : p.nombrecompleto)}\r\n                              className=\"text-blue-600 font-medium hover:text-blue-800 underline\"\r\n                            >{mostrarDetalle ? 'Ocultar' : 'Ver detalle'}</button>\r\n                            <button\r\n                              onClick={() => setTrabajadorEnEdicion(p)}\r\n                              className=\"text-blue-600 font-medium hover:text-blue-800 underline\"\r\n                            >Editar datos</button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n\r\n                      \r\n       {trabajadorEnEdicion?.id === p.id && (\r\n  <tr>\r\n    <td colSpan=\"10\" className=\"p-4 bg-gray-50\">\r\n      <h4 className=\"font-bold mb-2\">✏️ Editando datos de {p.nombrecompleto}</h4>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        {/* Puesto */}\r\n        <select\r\n  className=\"border p-2 rounded\"\r\n  value={trabajadorEnEdicion.puesto}\r\n  onChange={(e) => setTrabajadorEnEdicion({ ...trabajadorEnEdicion, puesto: e.target.value })}\r\n>\r\n  <option value=\"\">Selecciona un puesto</option>\r\n  {puestosList.map((puesto, i) => (\r\n    <option key={i} value={puesto.nombre}>{puesto.nombre}</option>\r\n  ))}\r\n</select>\r\n\r\n        {/* Proyecto */}\r\n        <select\r\n  className=\"border p-2 rounded\"\r\n  value={trabajadorEnEdicion.proyecto}\r\n  onChange={(e) => setTrabajadorEnEdicion({ ...trabajadorEnEdicion, proyecto: e.target.value })}\r\n>\r\n  <option value=\"\">Selecciona un proyecto</option>\r\n  {proyectosList.map((proy, i) => (\r\n    <option key={i} value={proy.nombre}>{proy.nombre}</option>\r\n  ))}\r\n</select>\r\n\r\n        {/* Salario por día */}\r\n        <input\r\n          type=\"number\"\r\n          className=\"border p-2 rounded\"\r\n          value={trabajadorEnEdicion.salariopordia}\r\n          onChange={(e) => setTrabajadorEnEdicion({ ...trabajadorEnEdicion, salariopordia: parseFloat(e.target.value) })}\r\n          placeholder=\"Salario por día\"\r\n        />\r\n\r\n        {/* Meta establecida */}\r\n        <input\r\n          type=\"number\"\r\n          className=\"border p-2 rounded\"\r\n          value={trabajadorEnEdicion.metaestablecida}\r\n          onChange={(e) => setTrabajadorEnEdicion({ ...trabajadorEnEdicion, metaestablecida: parseInt(e.target.value) })}\r\n          placeholder=\"Meta establecida\"\r\n        />\r\n\r\n        {/* Bonificación por unidad extra */}\r\n        <input\r\n          type=\"number\"\r\n          className=\"border p-2 rounded\"\r\n          value={trabajadorEnEdicion.bonificacion}\r\n          onChange={(e) => setTrabajadorEnEdicion({ ...trabajadorEnEdicion, bonificacion: parseFloat(e.target.value) })}\r\n          placeholder=\"Bonificación\"\r\n        />\r\n\r\n        {/* Trabajo asignado */}\r\n        <input\r\n          type=\"text\"\r\n          className=\"border p-2 rounded\"\r\n          value={trabajadorEnEdicion.trabajometa}\r\n          onChange={(e) => setTrabajadorEnEdicion({ ...trabajadorEnEdicion, trabajometa: e.target.value })}\r\n          placeholder=\"Trabajo asignado\"\r\n        />\r\n\r\n        {/* No. de grupo */}\r\n        <input\r\n          type=\"number\"\r\n          className=\"border p-2 rounded\"\r\n          value={trabajadorEnEdicion.numerogrupo || \"\"}\r\n          onChange={(e) => setTrabajadorEnEdicion({ ...trabajadorEnEdicion, numerogrupo: parseInt(e.target.value) })}\r\n          placeholder=\"No. de grupo\"\r\n        />\r\n\r\n        {/* Caja chica */}\r\n        <select\r\n          className=\"border p-2 rounded\"\r\n          value={trabajadorEnEdicion.caja_chica_asignada ? \"si\" : \"no\"}\r\n          onChange={(e) =>\r\n            setTrabajadorEnEdicion({\r\n              ...trabajadorEnEdicion,\r\n              caja_chica_asignada: e.target.value === \"si\",\r\n            })\r\n          }\r\n        >\r\n          <option value=\"no\">Caja chica: No</option>\r\n          <option value=\"si\">Caja chica: Sí</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"flex gap-4 mt-4\">\r\n        <button\r\n          onClick={async () => {\r\n            const { error } = await supabase\r\n              .from(\"registrodepersonal\")\r\n              .update(trabajadorEnEdicion)\r\n              .eq(\"id\", trabajadorEnEdicion.id);\r\n\r\n            if (!error) {\r\n              alert(\"Datos actualizados correctamente\");\r\n              setTrabajadorEnEdicion(null);\r\n              obtenerPersonal();\r\n            } else {\r\n              alert(\"Hubo un error\");\r\n              console.error(error);\r\n            }\r\n          }}\r\n          className=\"bg-green-600 text-white px-4 py-2 rounded\"\r\n        >\r\n          Guardar cambios\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setTrabajadorEnEdicion(null)}\r\n          className=\"bg-gray-400 text-white px-4 py-2 rounded\"\r\n        >\r\n          Cancelar\r\n        </button>\r\n      </div>\r\n    </td>\r\n  </tr>\r\n)}\r\n\r\n        \r\n            </React.Fragment>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n\r\n\r\n)}\r\n            \r\n        {mostrarDetalle && (\r\n  <tr>\r\n    <td colSpan=\"10\" className=\"p-4 text-center align-top\">\r\n      <div className=\"inline-block text-left w-full max-w-4xl bg-gray-100 p-4 rounded shadow border border-gray-300\">\r\n        <h4 className=\"font-semibold mb-2\">📋 Reportes diarios de {p.nombrecompleto}</h4>\r\n\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full text-sm border mt-2\">\r\n            <thead className=\"bg-gray-200\">\r\n              <tr>\r\n                <th className=\"border p-2\">Fecha</th>\r\n                <th className=\"border p-2\">Cantidad</th>\r\n                <th className=\"border p-2\">Viáticos</th>\r\n                <th className=\"border p-2\">Comentario</th>\r\n                <th className=\"border p-2\">Reportado por</th>\r\n                <th className=\"border p-2\">Pago meta diaria</th>\r\n                <th className=\"border p-2\">Pago del día</th>\r\n                <th className=\"border p-2\">Pago total</th>\r\n                <th className=\"border p-2\">Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {reportesPersona.map((r, idx) => {\r\n                const sePresento = r.sepresentoatrabajar === \"Sí\";\r\n                const cantidad = r.cantidad || 0;\r\n                const salarioDia = r.salariopordia || 0;\r\n                const metaEstablecida = r.metaestablecida || 0;\r\n                const bonificacionUnidad = r.bonificacion || 0;\r\n                const pagoPorUnidad = r.precioporcantidad || 0;\r\n\r\n                const pagoMeta = (sePresento && cantidad > metaEstablecida)\r\n                  ? (cantidad - metaEstablecida) * bonificacionUnidad\r\n                  : 0;\r\n\r\n                const pagoDia = sePresento\r\n                  ? (r.modalidad === \"día\" ? salarioDia : cantidad * pagoPorUnidad)\r\n                  : 0;\r\n\r\n                const total = pagoDia + pagoMeta + (r.viaticos || 0);\r\n\r\n                return (\r\n                  <tr key={idx}>\r\n                    <td className=\"border p-2\">{r.fechareporte}</td>\r\n                    <td className=\"border p-2\">{cantidad}</td>\r\n                    <td className=\"border p-2\">Q{(r.viaticos || 0).toFixed(2)}</td>\r\n                    <td className=\"border p-2\">{r.comentario || \"--\"}</td>\r\n                    <td className=\"border p-2\">{r.reportadopor || \"Desconocido\"}</td>\r\n                    <td className=\"border p-2\">{pagoMeta > 0 ? `Q${pagoMeta.toFixed(2)}` : \"--\"}</td>\r\n                    <td className=\"border p-2\">{pagoDia > 0 ? `Q${pagoDia.toFixed(2)}` : \"--\"}</td>\r\n                    <td className=\"border p-2 font-semibold text-green-700\">Q{total.toFixed(2)}</td>\r\n                    <td className=\"border p-2\">\r\n                      <button\r\n                        className=\"text-blue-500 hover:underline\"\r\n                        onClick={() => setReporteEnEdicion(r)}\r\n                      >\r\n                        Editar\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {p.caja_chica_asignada && (\r\n          <div className=\"bg-white shadow-md rounded-xl p-4 mt-10\">\r\n            <h2 className=\"text-xl font-bold text-gray-800 mb-4\">🧾 Gastos de caja chica</h2>\r\n            <p className=\"mb-4 text-sm text-gray-600\">\r\n              Asignado: <span className=\"font-semibold\">Q{(p.monto_caja_chica || 0).toFixed(2)}</span> |{\" \"}\r\n              Gastado: <span className=\"text-red-600 font-semibold\">\r\n                Q{gastosCajaChica.filter(g => g.nombre_trabajador === p.nombrecompleto).reduce((sum, g) => sum + (g.costo || 0), 0).toFixed(2)}\r\n              </span> |{\" \"}\r\n              Disponible: <span className=\"text-green-700 font-semibold\">\r\n                Q{((p.monto_caja_chica || 0) -\r\n                  gastosCajaChica\r\n                    .filter(g => g.nombre_trabajador === p.nombrecompleto)\r\n                    .reduce((sum, g) => sum + (g.costo || 0), 0)).toFixed(2)}\r\n              </span>\r\n            </p>\r\n\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full text-sm text-left text-gray-700\">\r\n                <thead className=\"bg-gray-100 text-xs uppercase font-semibold text-gray-600\">\r\n                  <tr>\r\n                    <th className=\"px-4 py-3\">Fecha</th>\r\n                    <th className=\"px-4 py-3\">No. Factura</th>\r\n                    <th className=\"px-4 py-3\">Proveedor</th>\r\n                    <th className=\"px-4 py-3\">Comentario</th>\r\n                    <th className=\"px-4 py-3\">Proyecto</th>\r\n                    <th className=\"px-4 py-3\">Costo</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {gastosCajaChica.filter(g => g.nombre_trabajador === p.nombrecompleto).length === 0 ? (\r\n                    <tr>\r\n                      <td colSpan=\"6\" className=\"text-center py-4 text-gray-500\">Sin registros aún</td>\r\n                    </tr>\r\n                  ) : (\r\n                    gastosCajaChica\r\n                      .filter(g => g.nombre_trabajador === p.nombrecompleto)\r\n                      .map((gasto) => (\r\n                        <tr key={gasto.id} className=\"hover:bg-gray-50 transition-all border-b\">\r\n                          <td className=\"px-4 py-3\">{gasto.fecha}</td>\r\n                          <td className=\"px-4 py-3\">{gasto.nofactura}</td>\r\n                          <td className=\"px-4 py-3\">{gasto.proveedor}</td>\r\n                          <td className=\"px-4 py-3\">{gasto.comentario}</td>\r\n                          <td className=\"px-4 py-3\">{gasto.proyecto}</td>\r\n                          <td className=\"px-4 py-3 font-semibold text-green-700\">Q{gasto.costo.toFixed(2)}</td>\r\n                        </tr>\r\n                      ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </td>\r\n  \r\n   </tr>\r\n  )}\r\n\r\n\r\n\r\n <>\r\n  {/* TOTAL ACUMULADO */}\r\n  <tr className=\"bg-gray-100 font-bold\">\r\n    <td className=\"border p-2 text-right\" colSpan={7}>Total acumulado</td>\r\n    <td className=\"border p-2 text-right\">\r\n      Q{reportesPersona.reduce((sum, r) => {\r\n        const cantidad = r.cantidad || 0;\r\n        const sePresento = r.sepresentoatrabajar === \"Sí\";\r\n        let salarioBase = 0;\r\n        let bonificacion = 0;\r\n        const viatico = sePresento ? (r.viaticos || 0) : 0;\r\n\r\n        if (sePresento) {\r\n          if (p.modalidad === 'cantidad') {\r\n            salarioBase = cantidad * (p.precioporcantidad || 0);\r\n          } else {\r\n            salarioBase = p.salariopordia || 0;\r\n            const meta = p.metaestablecida || 0;\r\n            if (cantidad > meta) {\r\n              const extra = cantidad - meta;\r\n              bonificacion = extra * (p.bonificacion || 0);\r\n            }\r\n          }\r\n        }\r\n\r\n        return sum + salarioBase + bonificacion + viatico;\r\n      }, 0).toFixed(2)}\r\n    </td>\r\n  </tr>\r\n\r\n  {/* Formulario para agregar reporte */}\r\n  <tr>\r\n    <td colSpan=\"10\" className=\"p-4\">\r\n      <AgregarReporte\r\n        trabajador={p}\r\n        usuario={usuario}\r\n        onGuardar={obtenerReportes}\r\n      />\r\n    </td>\r\n  </tr>\r\n</>\r\n\r\n            {reporteEnEdicion && (\r\n  <div className=\"mt-4 bg-yellow-50 p-4 rounded shadow border border-yellow-300\">\r\n    <h4 className=\"font-semibold mb-2\">✏️ Editar reporte del {reporteEnEdicion.fechareporte}</h4>\r\n\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n      <input\r\n        type=\"number\"\r\n        className=\"border p-2 rounded\"\r\n        value={reporteEnEdicion.cantidad}\r\n        onChange={(e) => setReporteEnEdicion({ ...reporteEnEdicion, cantidad: parseInt(e.target.value) })}\r\n        placeholder=\"Cantidad\"\r\n      />\r\n\r\n      <input\r\n        type=\"number\"\r\n        className=\"border p-2 rounded\"\r\n        value={reporteEnEdicion.viaticos}\r\n        onChange={(e) => setReporteEnEdicion({ ...reporteEnEdicion, viaticos: parseFloat(e.target.value) })}\r\n        placeholder=\"Viáticos\"\r\n      />\r\n\r\n      <input\r\n        type=\"text\"\r\n        className=\"border p-2 rounded col-span-2\"\r\n        value={reporteEnEdicion.comentario}\r\n        onChange={(e) => setReporteEnEdicion({ ...reporteEnEdicion, comentario: e.target.value })}\r\n        placeholder=\"Comentario\"\r\n      />\r\n    </div>\r\n\r\n    <div className=\"flex gap-4 mt-4\">\r\n  <button\r\n    className=\"bg-green-600 text-white px-4 py-2 rounded\"\r\n    onClick={async () => {\r\n      if (!reporteEnEdicion?.id) {\r\n        alert(\"No se puede actualizar: falta el ID del reporte.\");\r\n        return;\r\n      }\r\n\r\n      const actualizado = {\r\n        cantidad: parseInt(reporteEnEdicion.cantidad),\r\n        viaticos: parseFloat(reporteEnEdicion.viaticos),\r\n        comentario: reporteEnEdicion.comentario || \"--\",\r\n        sepresentoatrabajar: reporteEnEdicion.sepresetentoatrabajar || \"Sí\",\r\n        numerogrupo: reporteEnEdicion.numerogrupo || null,\r\n        salariopordia: parseFloat(reporteEnEdicion.salariopordia || 0),\r\n        metaestablecida: parseInt(reporteEnEdicion.metaestablecida || 0),\r\n        bonificacion: parseFloat(reporteEnEdicion.bonificacion || 0),\r\n        modalidad: reporteEnEdicion.modalidad || \"día\",\r\n        precioporcantidad: parseFloat(reporteEnEdicion.precioporcantidad || 0),\r\n        proyecto: reporteEnEdicion.proyecto || \"\",\r\n      };\r\n\r\n      const { error } = await supabase\r\n        .from(\"reportesdiarios\")\r\n        .update(actualizado)\r\n        .eq(\"id\", reporteEnEdicion.id);\r\n\r\n      if (!error) {\r\n        alert(\"Reporte actualizado correctamente\");\r\n        setReporteEnEdicion(null); // salir del modo edición\r\n        obtenerReportes();         // refrescar tabla\r\n      } else {\r\n        console.error(\"Error al actualizar:\", error);\r\n        alert(\"Ocurrió un error al actualizar el reporte\");\r\n      }\r\n    }}\r\n  >\r\n    Guardar cambios\r\n  </button>\r\n\r\n  <button\r\n    onClick={() => setReporteEnEdicion(null)}\r\n    className=\"bg-gray-500 text-white px-4 py-2 rounded\"\r\n  >\r\n    Cancelar\r\n    </button>\r\n</div>\r\n</div>\r\n)}\r\n\r\n    {vista === 'planilla' && historialVisible && (\r\n        <div className=\"mt-6 bg-gray-100 p-4 rounded\">\r\n          <h3 className=\"font-bold text-lg mb-2\">\r\n            📘 Detalle de reportes de {historialVisible}\r\n          </h3>\r\n          {reportes\r\n            .filter(r => r.nombretrabajador === historialVisible)\r\n            .map((r, i) => (\r\n              <p key={i}>📅 {r.fechareporte} — {r.cantidad} unidades — Viáticos: Q{(r.viaticos || 0).toFixed(2)} — {r.comentario || 'sin comentario'}</p>\r\n            ))}\r\n          <button\r\n            onClick={() => setHistorialVisible(null)}\r\n            className=\"mt-4 text-red-600 underline\"\r\n          >Cerrar</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}