{"ast":null,"code":"// src/utils.js\nimport { supabase } from \"./supabase\";\nexport async function guardarLog(usuario, accion, descripcion = \"\") {\n  if (!usuario || !usuario.nombre && !usuario.usuario) {\n    console.warn(\"No hay usuario vÃ¡lido\");\n    return;\n  }\n  try {\n    console.log(\"Intentando guardar log:\", {\n      usuario: usuario.nombre || usuario.usuario,\n      accion,\n      descripcion\n    });\n    const {\n      error\n    } = await supabase.from(\"logs\").insert({\n      usuario: usuario.nombre || usuario.usuario,\n      // ðŸ‘ˆ usamos el que exista\n      accion: accion,\n      descripcion: descripcion\n    });\n    if (error) {\n      console.error(\"Error insertando log:\", error.message);\n    }\n  } catch (err) {\n    console.error(\"Error inesperado:\", err);\n  }\n}","map":{"version":3,"names":["supabase","guardarLog","usuario","accion","descripcion","nombre","console","warn","log","error","from","insert","message","err"],"sources":["C:/Users/garci/Downloads/nimbus-login-app/src/utils.js"],"sourcesContent":["// src/utils.js\r\nimport { supabase } from \"./supabase\";\r\n\r\nexport async function guardarLog(usuario, accion, descripcion = \"\") {\r\n  if (!usuario || (!usuario.nombre && !usuario.usuario)) {\r\n    console.warn(\"No hay usuario vÃ¡lido\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    console.log(\"Intentando guardar log:\", {\r\n      usuario: usuario.nombre || usuario.usuario,\r\n      accion,\r\n      descripcion,\r\n    });\r\n\r\n    const { error } = await supabase.from(\"logs\").insert({\r\n      usuario: usuario.nombre || usuario.usuario, // ðŸ‘ˆ usamos el que exista\r\n      accion: accion,\r\n      descripcion: descripcion,\r\n    });\r\n\r\n    if (error) {\r\n      console.error(\"Error insertando log:\", error.message);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error inesperado:\", err);\r\n  }\r\n}\r\n"],"mappings":"AAAA;AACA,SAASA,QAAQ,QAAQ,YAAY;AAErC,OAAO,eAAeC,UAAUA,CAACC,OAAO,EAAEC,MAAM,EAAEC,WAAW,GAAG,EAAE,EAAE;EAClE,IAAI,CAACF,OAAO,IAAK,CAACA,OAAO,CAACG,MAAM,IAAI,CAACH,OAAO,CAACA,OAAQ,EAAE;IACrDI,OAAO,CAACC,IAAI,CAAC,uBAAuB,CAAC;IACrC;EACF;EAEA,IAAI;IACFD,OAAO,CAACE,GAAG,CAAC,yBAAyB,EAAE;MACrCN,OAAO,EAAEA,OAAO,CAACG,MAAM,IAAIH,OAAO,CAACA,OAAO;MAC1CC,MAAM;MACNC;IACF,CAAC,CAAC;IAEF,MAAM;MAAEK;IAAM,CAAC,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,MAAM,CAAC,CAACC,MAAM,CAAC;MACnDT,OAAO,EAAEA,OAAO,CAACG,MAAM,IAAIH,OAAO,CAACA,OAAO;MAAE;MAC5CC,MAAM,EAAEA,MAAM;MACdC,WAAW,EAAEA;IACf,CAAC,CAAC;IAEF,IAAIK,KAAK,EAAE;MACTH,OAAO,CAACG,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAACG,OAAO,CAAC;IACvD;EACF,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZP,OAAO,CAACG,KAAK,CAAC,mBAAmB,EAAEI,GAAG,CAAC;EACzC;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}