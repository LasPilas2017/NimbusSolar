{"version":3,"file":"static/js/849.8e637fea.chunk.js","mappings":"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","sources":["modules/Personal/ModificarTrabajos.jsx"],"sourcesContent":["// ModificarTrabajos.jsx\r\nimport React, { useState, useEffect } from \"react\";\r\nimport supabase from \"../../supabase\";\r\nimport { guardarLog } from \"../../utils\";\r\n\r\nexport default function ModificarTrabajos({ usuario, persona, onCerrar, onRecargar }) {\r\n  const [datosFormulario, setDatosFormulario] = useState({\r\n    salarioBase: \"\",\r\n    bonoAsistencia: \"\",\r\n    viaticos: \"\",\r\n    pagoHoraExtra: \"\",\r\n    salarioDia: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (persona.modalidad === \"fijo\") {\r\n      setDatosFormulario({\r\n        salarioBase: persona.salarioporquincena || \"\",\r\n        bonoAsistencia: persona.bonificacion || \"\",\r\n        viaticos: persona.viaticos_diarios || \"\",\r\n        pagoHoraExtra: persona.pagoporhoraextra || \"\",\r\n      });\r\n    } else if (persona.modalidad === \"temporal\") {\r\n      setDatosFormulario({\r\n        salarioDia: persona.salariopordia || \"\",\r\n        pagoHoraExtra: persona.pagoporhoraextra || \"\",\r\n      });\r\n    }\r\n  }, [persona]);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatosFormulario((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleGuardarCambios = async () => {\r\n    let updateData = {};\r\n\r\n    if (persona.modalidad === \"fijo\") {\r\n      updateData = {\r\n        salarioporquincena: datosFormulario.salarioBase || null,\r\n        bonificacion: datosFormulario.bonoAsistencia || null,\r\n        viaticos_diarios: datosFormulario.viaticos || null,\r\n        horas_extras: datosFormulario.pagoHoraExtra || null,\r\n      };\r\n    } else if (persona.modalidad === \"temporal\") {\r\n      updateData = {\r\n        salariopordia: datosFormulario.salarioDia || null,\r\n        horas_extras: datosFormulario.pagoHoraExtra || null,\r\n      };\r\n    }\r\n\r\n    const { error } = await supabase\r\n      .from(\"registrodepersonal\")\r\n      .update(updateData)\r\n      .eq(\"id\", persona.id);\r\n\r\n    if (error) {\r\n      console.error(\"Error al actualizar:\", error);\r\n      alert(\"Ocurrió un error al actualizar los datos.\");\r\n    } else {\r\n      alert(\"Datos actualizados correctamente.\");\r\n\r\n      await guardarLog(\r\n        usuario,\r\n        \"Modificación de datos de trabajo\",\r\n        `El usuario modificó datos de: ${persona.nombrecompleto}`\r\n      );\r\n      \r\n      if (onRecargar) {\r\n        onRecargar();\r\n      }\r\n      onCerrar();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 rounded-xl shadow bg-white\">\r\n      <h3 className=\"font-semibold text-lg mb-4\">⚙️ Modificar Datos de Trabajo</h3>\r\n\r\n      {persona.modalidad === \"fijo\" && (\r\n        <>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block font-medium mb-1\">Salario por quincena (Q)</label>\r\n            <input\r\n              type=\"number\"\r\n              name=\"salarioBase\"\r\n              value={datosFormulario.salarioBase}\r\n              onChange={handleInputChange}\r\n              className=\"border p-2 rounded w-full\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block font-medium mb-1\">Bono por día trabajado (Q)</label>\r\n            <input\r\n              type=\"number\"\r\n              name=\"bonoAsistencia\"\r\n              value={datosFormulario.bonoAsistencia}\r\n              onChange={handleInputChange}\r\n              className=\"border p-2 rounded w-full\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block font-medium mb-1\">Viáticos diarios (Q)</label>\r\n            <input\r\n              type=\"number\"\r\n              name=\"viaticos\"\r\n              value={datosFormulario.viaticos}\r\n              onChange={handleInputChange}\r\n              className=\"border p-2 rounded w-full\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block font-medium mb-1\">Pago por hora extra (Q)</label>\r\n            <input\r\n              type=\"number\"\r\n              name=\"pagoHoraExtra\"\r\n              value={datosFormulario.pagoHoraExtra}\r\n              onChange={handleInputChange}\r\n              className=\"border p-2 rounded w-full\"\r\n            />\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {persona.modalidad === \"temporal\" && (\r\n        <>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block font-medium mb-1\">Salario por día (Q)</label>\r\n            <input\r\n              type=\"number\"\r\n              name=\"salarioDia\"\r\n              value={datosFormulario.salarioDia}\r\n              onChange={handleInputChange}\r\n              className=\"border p-2 rounded w-full\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label className=\"block font-medium mb-1\">Pago por hora extra (Q)</label>\r\n            <input\r\n              type=\"number\"\r\n              name=\"pagoHoraExtra\"\r\n              value={datosFormulario.pagoHoraExtra}\r\n              onChange={handleInputChange}\r\n              className=\"border p-2 rounded w-full\"\r\n            />\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      <div className=\"flex gap-4 justify-center mt-4\">\r\n        <button\r\n          className=\"bg-green-600 text-white px-4 py-2 rounded shadow hover:bg-green-700\"\r\n          onClick={handleGuardarCambios}\r\n        >\r\n          Guardar\r\n        </button>\r\n        <button\r\n          className=\"bg-red-600 text-white px-4 py-2 rounded shadow hover:bg-red-700\"\r\n          onClick={onCerrar}\r\n        >\r\n          Cerrar\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ModificarTrabajos","_ref","usuario","persona","onCerrar","onRecargar","datosFormulario","setDatosFormulario","useState","salarioBase","bonoAsistencia","viaticos","pagoHoraExtra","salarioDia","useEffect","modalidad","salarioporquincena","bonificacion","viaticos_diarios","pagoporhoraextra","salariopordia","handleInputChange","e","name","value","target","prev","_objectSpread","_jsxs","className","children","_jsx","_Fragment","type","onChange","onClick","async","updateData","horas_extras","error","supabase","from","update","eq","id","console","alert","guardarLog","concat","nombrecompleto"],"sourceRoot":""}